<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ë©¸ì¢…ìœ„ê¸° ë™ë¬¼ - ì™œ ìŠ¬í”Œê¹Œìš”? (ì´ìœ  ì°¾ê¸°)</title>
  <style>
    :root{
      --bg:#f6f8fa;
      --card:#ffffff;
      --ink:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --good:#16a34a;
      --bad:#ef4444;
      --shadow:0 10px 22px rgba(0,0,0,.07);
      --r:18px;
    }
    body{
      font-family:"Noto Sans KR", system-ui, sans-serif;
      background:var(--bg);
      padding:18px;
      color:var(--ink);
      max-width:920px;
      margin:0 auto;
    }
    h1{ text-align:center; margin:8px 0 6px; font-size:26px; }
    .sub{
      text-align:center;
      margin:0 0 14px;
      color:var(--muted);
      line-height:1.35;
    }

    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--r);
      padding:12px 14px;
      box-shadow:var(--shadow);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
    }
    .pill{
      background:#111827;
      color:#fff;
      padding:8px 12px;
      border-radius:999px;
      font-weight:900;
      font-size:14px;
    }
    .btn{
      border:1px solid #d1d5db;
      background:#fff;
      border-radius:14px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:900;
      font-size:14px;
    }
    .btn:hover{ background:#f3f4f6; }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--r);
      padding:16px;
      box-shadow:var(--shadow);
    }

    /* ë™ë¬¼ + ê°ì • í‘œì‹œ */
    #animalWrap{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      margin: 8px 0 10px;
    }
    .bigEmoji{
      font-family:"Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji",sans-serif;
      font-size: 96px;
      line-height:1;
    }
    #animalName{
      text-align:center;
      font-weight:1000;
      font-size:20px;
      margin:0 0 6px;
    }
    #prompt{
      text-align:center;
      font-weight:1000;
      font-size:18px;
      margin:0 0 12px;
      color:#1f2937;
    }

    /* ì„ íƒì§€ 3ê°œ */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
    }
    .choice{
      border:2px solid #d1d5db;
      border-radius:18px;
      padding:14px 10px;
      background:#fff;
      cursor:pointer;
      user-select:none;
      text-align:center;
      font-weight:1000;
      transition:.15s;
      box-shadow:0 6px 14px rgba(0,0,0,.05);
      font-size:18px;
      min-height: 70px;
      display:flex;
      align-items:center;
      justify-content:center;
      line-height:1.2;
    }
    .choice:hover{ background:#eef2ff; border-color:#a5b4fc; }
    .choice.correct{ border-color: var(--good); background:#f0fdf4; }
    .choice.wrong{ border-color: var(--bad); background:#fef2f2; }

    /* í”¼ë“œë°± */
    .msg{
      min-height: 26px;
      margin-top: 12px;
      text-align:center;
      font-weight:1000;
      font-size:18px;
    }
    .ok{ color:var(--good); }
    .no{ color:var(--bad); }

    #explain{
      display:none;
      margin-top:10px;
      background:#f9fafb;
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px 12px;
      color:#374151;
      font-weight:900;
      text-align:center;
      line-height:1.4;
    }

    .row{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
    }

    /* ê²°ê³¼ ëª¨ë‹¬ */
    .backdrop{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      background:#fff;
      border-radius:18px;
      max-width:520px;
      width:100%;
      padding:18px;
      box-shadow:0 18px 40px rgba(0,0,0,.25);
      border:1px solid var(--line);
      text-align:center;
    }
    .modal h2{ margin:0 0 8px; font-size:24px; }
    .modal p{ margin:0 0 14px; color:#374151; font-weight:900; line-height:1.5; }
    .badge{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:8px 10px;
      border-radius:999px;
      background:#f3f4f6;
      border:1px solid var(--line);
      font-weight:900;
      margin:4px;
    }

    @media (max-width: 720px){
      .grid{ grid-template-columns: 1fr; }
      .choice{ min-height: 62px; }
      .bigEmoji{ font-size: 84px; }
    }
  </style>
</head>

<body>
  <h1>ğŸ’” ì´ ë™ë¬¼ì€ ì™œ ìŠ¬í”Œê¹Œìš”?</h1>
  <p class="sub">ë™ë¬¼ì˜ ë§ˆìŒì„ ìƒê°í•´ ë³´ê³ , ì´ìœ ë¥¼ ê³¨ë¼ìš”.<br><b>ì‚¬ëŒ ë•Œë¬¸ì— ìƒê¸´ ì¼</b>ì„ ì°¾ì•„ë³´ëŠ” í™œë™ì´ì—ìš”.</p>

  <div class="panel">
    <div class="pill">ë¬¸ì œ <span id="qNow">1</span> / <span id="qTotal">5</span></div>
    <div class="pill">ì ìˆ˜ <span id="scoreTxt">0</span>ì </div>
    <div>
      <button class="btn" id="teacherBtn">êµì‚¬ ë©˜íŠ¸</button>
      <button class="btn" id="resetBtn">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
  </div>

  <div class="card">
    <div id="animalWrap">
      <div class="bigEmoji" id="animalEmoji">ğŸ§</div>
      <div class="bigEmoji" id="sadEmoji">ğŸ˜¢</div>
    </div>

    <div id="animalName"></div>
    <div id="prompt">ì´ ë™ë¬¼ì€ ì™œ ìŠ¬í”Œê¹Œìš”?</div>

    <div class="grid" id="choices"></div>

    <div class="msg" id="message"></div>
    <div id="explain"></div>

    <div class="row">
      <button class="btn" id="nextBtn" disabled>ë‹¤ìŒ â–¶</button>
    </div>
  </div>

  <div class="backdrop" id="backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h2>ğŸ‰ ë!</h2>
      <p id="resultText"></p>
      <div class="row">
        <button class="btn" id="againBtn" style="background:#111827;color:#fff;border-color:#111827;">í•œ ë²ˆ ë”</button>
        <button class="btn" id="closeBtn">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

<script>
  // âœ… ë¬¸ì œ(ë©¸ì¢…ìœ„ê¸°/ìœ„ê¸° ë™ë¬¼) 5ì¢…
  // correct: í™˜ê²½/ì‚¬ëŒì˜ ì˜í–¥(ì•„ì£¼ ë‹¨ìˆœí™”)
  // wrongs: ìœ ì•„ì—ê²Œ ì¹œìˆ™í•˜ì§€ë§Œ ë©¸ì¢…ìœ„ê¸° ì›ì¸ê³¼ ë¬´ê´€í•œ 'ì¼ìƒ' ë¬¸ì¥
  const QUESTIONS = [
    {
      name:"íŒë‹¤",
      emoji:"ğŸ¼",
      correct:"ìˆ²ì´ ì—†ì–´ì¡Œì–´ìš”",
      wrongs:["ì¹œêµ¬ë‘ ì‹¸ì› ì–´ìš”","ì¥ë‚œê°ì´ ì—†ì–´ì¡Œì–´ìš”"],
      explain:"ëŒ€ë‚˜ë¬´ ìˆ²ì´ ì¤„ì–´ë“¤ë©´ íŒë‹¤ëŠ” ë¨¹ì„ ê²ƒì´ ì ì–´ì ¸ìš”."
    },
    {
      name:"ì½”ë¼ë¦¬",
      emoji:"ğŸ˜",
      correct:"ì‚´ ê³³ì´ ì¤„ì—ˆì–´ìš”",
      wrongs:["ë°¥ì„ ëŠ¦ê²Œ ë¨¹ì—ˆì–´ìš”","ë„˜ì–´ì¡Œì–´ìš”"],
      explain:"ì‚¬ëŒì´ ìˆ²ì„ ì—†ì• ë©´ ì½”ë¼ë¦¬ê°€ ì‚´ ê³³ì´ ì¤„ì–´ë“¤ì–´ìš”."
    },
    {
      name:"ë°”ë‹¤ê±°ë¶",
      emoji:"ğŸ¢",
      correct:"ë°”ë‹¤ê°€ ë”ëŸ¬ì›Œì¡Œì–´ìš”",
      wrongs:["ë¹„ê°€ ì™€ìš”","ì¹œêµ¬ê°€ ì•ˆ ë†€ì•„ì¤˜ìš”"],
      explain:"ë°”ë‹¤ì— ì“°ë ˆê¸°ê°€ ë§ì•„ì§€ë©´ ë°”ë‹¤ê±°ë¶ì´ ë‹¤ì¹˜ê³  ì•„í”Œ ìˆ˜ ìˆì–´ìš”."
    },
    {
      name:"í˜¸ë‘ì´",
      emoji:"ğŸ¯",
      correct:"ìˆ²ì´ ì—†ì–´ì¡Œì–´ìš”",
      wrongs:["ìƒ‰ì—°í•„ì´ ì—†ì–´ìš”","ë°°ê°€ ê³ íŒŒìš”"],
      explain:"ìˆ²ì´ ì¤„ì–´ë“¤ë©´ í˜¸ë‘ì´ëŠ” ìˆ¨ì„ ê³³ê³¼ ë¨¹ì´ë¥¼ ì°¾ê¸° ì–´ë ¤ì›Œìš”."
    },
    {
      name:"í­ê·„",
      emoji:"ğŸ§",
      correct:"ì–¼ìŒì´ ë…¹ì•˜ì–´ìš”",
      wrongs:["ë°¥ì„ ëŠ¦ê²Œ ë¨¹ì—ˆì–´ìš”","ì¥ë‚œê°ì´ ë§ê°€ì¡Œì–´ìš”"],
      explain:"ì§€êµ¬ê°€ ë”ì›Œì§€ë©´ ì–¼ìŒì´ ì¤„ì–´ë“¤ì–´ í­ê·„ì˜ ì§‘ì´ ì‘ì•„ì ¸ìš”."
    }
  ];

  const OPTION_COUNT = 3;

  // ìƒíƒœ
  let order = [];
  let idx = 0;
  let score = 0;
  let answered = false;

  // DOM
  const qNow = document.getElementById("qNow");
  const qTotal = document.getElementById("qTotal");
  const scoreTxt = document.getElementById("scoreTxt");
  const animalEmoji = document.getElementById("animalEmoji");
  const animalName = document.getElementById("animalName");
  const choicesDiv = document.getElementById("choices");
  const message = document.getElementById("message");
  const explainBox = document.getElementById("explain");
  const nextBtn = document.getElementById("nextBtn");

  const teacherBtn = document.getElementById("teacherBtn");
  const resetBtn = document.getElementById("resetBtn");

  const backdrop = document.getElementById("backdrop");
  const resultText = document.getElementById("resultText");
  const againBtn = document.getElementById("againBtn");
  const closeBtn = document.getElementById("closeBtn");

  function shuffle(arr){
    const a = [...arr];
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]] = [a[j],a[i]];
    }
    return a;
  }

  function toast(text, ok=null){
    message.textContent = text;
    message.className = "msg" + (ok===true ? " ok" : ok===false ? " no" : "");
  }

  function buildOptions(q){
    const opts = [q.correct, ...q.wrongs];
    // í˜¹ì‹œ ë°ì´í„°ê°€ ë°”ë€Œì–´ë„ 3ê°œë¡œ ì•ˆì „í•˜ê²Œ
    return shuffle(opts).slice(0, OPTION_COUNT);
  }

  function renderQuestion(){
    const q = order[idx];

    qNow.textContent = idx + 1;
    qTotal.textContent = order.length;

    animalEmoji.textContent = q.emoji;
    animalName.textContent = `ì˜¤ëŠ˜ì˜ ë™ë¬¼: ${q.name}`;

    explainBox.style.display = "none";
    explainBox.textContent = "";
    toast("ì´ìœ ë¥¼ ê³¨ë¼ì£¼ì„¸ìš” ğŸ™‚", null);

    const options = buildOptions(q);

    choicesDiv.innerHTML = "";
    options.forEach(text => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "choice";
      btn.textContent = text;
      btn.addEventListener("click", () => choose(text, btn));
      choicesDiv.appendChild(btn);
    });

    answered = false;
    nextBtn.disabled = true;
  }

  function choose(selectedText, btn){
    if(answered) return;
    answered = true;

    const q = order[idx];
    const isCorrect = (selectedText === q.correct);

    const all = Array.from(document.querySelectorAll(".choice"));
    all.forEach(b => b.style.pointerEvents = "none");

    if(isCorrect){
      score += 10;
      scoreTxt.textContent = score;
      btn.classList.add("correct");
      toast("âœ… ë§ì•„ìš”! ì‚¬ëŒ ë•Œë¬¸ì— ìƒê¸´ ì¼ì´ì—ìš”.", true);
    } else {
      btn.classList.add("wrong");
      toast("âŒ ë‹¤ì‹œ ìƒê°í•´ìš”! ì •ë‹µì„ ë³¼ê¹Œìš”?", false);

      const correctBtn = all.find(b => b.textContent === q.correct);
      if(correctBtn) correctBtn.classList.add("correct");
    }

    // ì„¤ëª…(ì›ì¸ ì´í•´) ë³´ì—¬ì£¼ê¸°
    explainBox.textContent = "ì„¤ëª…: " + q.explain;
    explainBox.style.display = "block";

    nextBtn.disabled = false;
  }

  function next(){
    if(idx < order.length - 1){
      idx++;
      renderQuestion();
    } else {
      showResult();
    }
  }

  function showResult(){
    const correctCount = score / 10;
    resultText.innerHTML =
      `<span class="badge">âœ… ë§íŒ ê°œìˆ˜ ${correctCount} / ${order.length}</span>` +
      `<span class="badge">ğŸ† ì ìˆ˜ ${score}ì </span><br><br>` +
      `ë™ë¬¼ì˜ ë§ˆìŒì„ ì˜ ìƒê°í•´ì¤¬ì–´ìš” ğŸ’›<br>` +
      `ë‹¤ìŒì—ëŠ” â€œìš°ë¦¬ê°€ ë„ì™€ì¤„ ìˆ˜ ìˆëŠ” ë°©ë²•â€ë„ ê³¨ë¼ë³¼ê¹Œìš”?`;
    backdrop.style.display = "flex";
    backdrop.setAttribute("aria-hidden","false");
  }

  function closeModal(){
    backdrop.style.display = "none";
    backdrop.setAttribute("aria-hidden","true");
  }

  function startGame(){
    closeModal();
    order = shuffle(QUESTIONS);
    idx = 0;
    score = 0;
    scoreTxt.textContent = score;
    renderQuestion();
  }

  // êµì‚¬ ë©˜íŠ¸(íŒì—… ëŒ€ì‹  ë©”ì‹œì§€ë¡œ ê°€ë³ê²Œ)
  const TEACHER_LINES = [
    "â€œì‚¬ëŒ ë•Œë¬¸ì— ì´ëŸ° ì¼ì´ ìƒê²¼ì„ê¹Œ?â€",
    "â€œë™ë¬¼ë„ ë§ˆìŒì´ ìˆì–´ìš”. ì–´ë–¤ ê¸°ë¶„ì¼ê¹Œ?â€",
    "â€œìš°ë¦¬ê°€ ë„ì™€ì¤„ ìˆ˜ ìˆëŠ” ì‘ì€ ë°©ë²•ì´ ìˆì„ê¹Œ?â€"
  ];
  let tIdx = 0;
  teacherBtn.addEventListener("click", () => {
    toast(TEACHER_LINES[tIdx % TEACHER_LINES.length], null);
    tIdx++;
    // ì ê¹ ê°•ì¡°
    message.style.transform = "scale(1.02)";
    setTimeout(() => message.style.transform = "scale(1)", 220);
  });

  // ë²„íŠ¼
  nextBtn.addEventListener("click", next);
  resetBtn.addEventListener("click", startGame);
  againBtn.addEventListener("click", startGame);
  closeBtn.addEventListener("click", closeModal);
  backdrop.addEventListener("click", (e) => { if(e.target === backdrop) closeModal(); });

  // í‚¤ë³´ë“œ(ì„ íƒ)
  window.addEventListener("keydown", (e) => {
    if(e.key === "Enter" && !nextBtn.disabled) next();
    if(e.key.toLowerCase() === "r") startGame();
    if(e.key === "Escape") closeModal();
  });

  // ì‹œì‘
  startGame();
</script>
</body>
</html>
